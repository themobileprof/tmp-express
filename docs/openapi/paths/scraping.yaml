# Scraping Management Endpoints
getScrapedUrls:
  tags:
    - Scraping
  summary: Get Scraped URLs
  description: Get list of scraped URLs with filters and pagination
  security:
    - BearerAuth: []
  parameters:
    - name: status
      in: query
      required: false
      schema:
        type: string
        enum: [pending, in_progress, completed, failed, skipped, partial]
      description: Filter by status
    - name: category
      in: query
      required: false
      schema:
        type: string
      description: Filter by category
    - name: level
      in: query
      required: false
      schema:
        type: string
      description: Filter by level
    - name: page
      in: query
      required: false
      schema:
        type: integer
        default: 1
      description: Page number
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 20
      description: Items per page
    - name: search
      in: query
      required: false
      schema:
        type: string
      description: Search in URL or title
  responses:
    '200':
      description: Scraped URLs retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                type: object
                properties:
                  urls:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        url:
                          type: string
                          format: uri
                        status:
                          type: string
                          enum: [pending, in_progress, completed, failed, skipped, partial]
                        title:
                          type: string
                        description:
                          type: string
                        category:
                          type: string
                        level:
                          type: string
                        metadata:
                          type: object
                        error_message:
                          type: string
                        retry_count:
                          type: integer
                        last_attempt_at:
                          type: string
                          format: date-time
                        completed_at:
                          type: string
                          format: date-time
                        created_at:
                          type: string
                          format: date-time
                        updated_at:
                          type: string
                          format: date-time
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                      limit:
                        type: integer
                      total:
                        type: integer
                      pages:
                        type: integer

addUrlToScrapingQueue:
  tags:
    - Scraping
  summary: Add URL to Scraping Queue
  description: Add a single URL to the scraping queue
  security:
    - BearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - url
          properties:
            url:
              type: string
              format: uri
              description: URL to scrape
            title:
              type: string
              description: Optional title for the URL
            description:
              type: string
              description: Optional description
            category:
              type: string
              description: Optional category
            level:
              type: string
              description: Optional difficulty level
            metadata:
              type: object
              description: Additional metadata
  responses:
    '201':
      description: URL added to scraping queue successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              url:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  url:
                    type: string
                    format: uri
                  status:
                    type: string
                    default: pending

addMultipleUrlsToScrapingQueue:
  tags:
    - Scraping
  summary: Add Multiple URLs to Scraping Queue
  description: Add multiple URLs to the scraping queue in bulk
  security:
    - BearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - urls
          properties:
            urls:
              type: array
              items:
                type: object
                required:
                  - url
                properties:
                  url:
                    type: string
                    format: uri
                  title:
                    type: string
                  category:
                    type: string
                  level:
                    type: string
  responses:
    '201':
      description: URLs added to scraping queue successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              addedCount:
                type: integer

getPendingUrls:
  tags:
    - Scraping
  summary: Get Pending URLs
  description: Get URLs that are pending processing
  security:
    - BearerAuth: []
  parameters:
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 10
      description: Number of URLs to fetch
  responses:
    '200':
      description: Pending URLs retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                type: object
                properties:
                  urls:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        url:
                          type: string
                          format: uri
                        status:
                          type: string
                          default: pending
                        created_at:
                          type: string
                          format: date-time

updateUrlStatus:
  tags:
    - Scraping
  summary: Update URL Status
  description: Update the status and metadata of a scraped URL
  security:
    - BearerAuth: []
  parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: URL ID
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - status
          properties:
            status:
              type: string
              enum: [pending, in_progress, completed, failed, skipped]
            title:
              type: string
            description:
              type: string
            category:
              type: string
            level:
              type: string
            metadata:
              type: object
  responses:
    '200':
      description: URL status updated successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              url:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  status:
                    type: string
                  updated_at:
                    type: string
                    format: date-time

getScrapingStatistics:
  tags:
    - Scraping
  summary: Get Scraping Statistics
  description: Get comprehensive scraping statistics and recent activity
  security:
    - BearerAuth: []
  responses:
    '200':
      description: Scraping statistics retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                type: object
                properties:
                  stats:
                    type: object
                    properties:
                      total:
                        type: integer
                      by_status:
                        type: object
                        properties:
                          pending:
                            type: integer
                          in_progress:
                            type: integer
                          completed:
                            type: integer
                          failed:
                            type: integer
                          skipped:
                            type: integer
                      summary:
                        type: object
                        properties:
                          pending:
                            type: integer
                          in_progress:
                            type: integer
                          completed:
                            type: integer
                          failed:
                            type: integer
                          skipped:
                            type: integer
                  recent_activity:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        url:
                          type: string
                          format: uri
                        status:
                          type: string
                        title:
                          type: string
                        updated_at:
                          type: string
                          format: date-time

resetFailedUrls:
  tags:
    - Scraping
  summary: Reset Failed URLs
  description: Reset all failed URLs back to pending status for retry
  security:
    - BearerAuth: []
  responses:
    '200':
      description: Failed URLs reset successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                type: object
                properties:
                  reset_count:
                    type: integer
                  message:
                    type: string

deleteScrapedUrl:
  tags:
    - Scraping
  summary: Delete Scraped URL
  description: Delete a scraped URL from the system
  security:
    - BearerAuth: []
  parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: URL ID
  responses:
    '200':
      description: Scraped URL deleted successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string 