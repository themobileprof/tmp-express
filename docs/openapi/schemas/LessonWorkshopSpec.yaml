# LessonWorkshopSpec Schema
type: object
description: Structured interactive terminal workshop spec for a lesson
properties:
  title:
    type: string
    description: Title of the workshop
  intro:
    type: string
    description: Intro text shown before the terminal
  environment:
    type: object
    description: Optional runtime hints for the terminal emulator
    properties:
      os:
        type: string
        example: ubuntu-22.04
      shell:
        type: string
        example: bash
      workingDir:
        type: string
        example: /home/student
  steps:
    type: array
    description: Ordered list of steps for the workshop
    items:
      type: object
      required: [step, prompt, expect]
      properties:
        step:
          type: integer
          description: Sequential step number starting at 1
          minimum: 1
        title:
          type: string
          description: Short title for the step
        instruction:
          type: string
          description: Instruction shown to the student for this step
        prompt:
          type: string
          description: The terminal prompt string to display
          example: student@vm:~$ 
        expect:
          type: object
          description: Expectation config for validating input/output
          properties:
            inputPattern:
              type: string
              description: Regex to validate the exact command the student should type
              example: ^ls\s+-la$
            outputIncludes:
              type: array
              items:
                type: string
              description: Strings that should appear in the simulated output
            outputExcludes:
              type: array
              items:
                type: string
              description: Strings that must not appear in the output
            exitCode:
              type: integer
              description: Expected exit code for the command
              default: 0
        simulate:
          type: object
          description: Simulator hints for frontend to render fake output
          properties:
            stdout:
              type: string
              description: Example stdout to show on success
            stderr:
              type: string
              description: Example stderr to show on failure
            filesChanged:
              type: array
              items:
                type: object
                properties:
                  path:
                    type: string
                  diff:
                    type: string
        comments:
          type: string
          description: Human-readable notes for admins about what is expected

