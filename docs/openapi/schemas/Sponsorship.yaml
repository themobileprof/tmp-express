# Sponsorship Schema
type: object
properties:
  id:
    type: string
    format: uuid
    description: Unique identifier for the sponsorship
  sponsorId:
    type: string
    format: uuid
    description: ID of the sponsor creating the sponsorship
  courseIds:
    type: array
    items:
      type: string
      format: uuid
    description: Array of course IDs for multi-course sponsorships
  courseTitles:
    type: array
    items:
      type: string
    description: Array of course titles for multi-course sponsorships
  coursePrices:
    type: array
    items:
      type: number
    description: Array of course prices for multi-course sponsorships
  discountCode:
    type: string
    description: Unique discount code for students to use
  discountType:
    type: string
    enum: [percentage, fixed]
    description: Type of discount (percentage or fixed amount)
  discountValue:
    type: number
    description: Value of the discount (percentage as decimal or fixed amount)
  maxStudents:
    type: integer
    minimum: 1
    description: Maximum number of students who can use this sponsorship
  studentsUsed:
    type: integer
    minimum: 0
    description: Number of students who have already used this sponsorship
  remainingSpots:
    type: integer
    minimum: 0
    description: Number of remaining spots available
  startDate:
    type: string
    format: date
    description: Start date when the sponsorship becomes active
  endDate:
    type: string
    format: date
    description: End date when the sponsorship expires
  status:
    type: string
    enum: [active, paused, expired, completed]
    description: Current status of the sponsorship
  completionRate:
    type: number
    minimum: 0
    maximum: 100
    description: Completion rate percentage of sponsored students
  notes:
    type: string
    description: Additional notes about the sponsorship
  isFullyFunded:
    type: boolean
    description: Whether the sponsorship provides 100% discount (free enrollment)
  
  # Admin Payment Tracking Fields
  isPaid:
    type: boolean
    default: false
    description: Whether the sponsorship has been paid for (admin tracking)
  paidAt:
    type: string
    format: date-time
    nullable: true
    description: When the sponsorship was marked as paid
  paymentId:
    type: string
    format: uuid
    nullable: true
    description: Reference to payment record (if applicable)
  paymentReference:
    type: string
    nullable: true
    description: External payment reference (e.g., bank transfer reference)
  paidAmount:
    type: number
    nullable: true
    description: Amount paid for the sponsorship
  paidCurrency:
    type: string
    default: "USD"
    description: Currency of the payment
  createdBy:
    type: string
    enum: [sponsor, admin]
    default: "sponsor"
    description: Who created the sponsorship (sponsor or admin)
  adminNote:
    type: string
    nullable: true
    description: Internal admin note about the sponsorship
  invoiceNumber:
    type: string
    nullable: true
    description: Generated invoice number for the sponsorship
  
  createdAt:
    type: string
    format: date-time
    description: When the sponsorship was created
  updatedAt:
    type: string
    format: date-time
    description: When the sponsorship was last updated
required:
  - id
  - sponsorId
  - discountCode
  - discountType
  - discountValue
  - maxStudents
  - startDate
  - endDate
  - status
  - createdAt
  - updatedAt 